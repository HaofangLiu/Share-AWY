{"version":3,"sources":["components/Tips.js","res/common.svg","res/music.svg","res/video.svg","res/file.svg","util/common-utils.js","components/List.js","pages/History.js"],"names":["StyledDiv","styled","div","Tips","children","getPreviewImage","urlObj","fileExt","getFileExtend","attributes","name","includes","url","file","music","video","common","copyToClip","str","navigator","clipboard","writeText","then","message","success","err","error","split","pop","toLowerCase","UploadList","observer","HistoryStore","useStore","useState","initloading","setInitLoading","useEffect","findList","reset","loadMore","isLoading","hasMore","style","textAlign","marginTop","height","lineHeight","onClick","itemLayout","dataSource","fileList","renderItem","item","avatar","title","loading","active","Item","actions","type","href","Meta","src","filename","id","History","UserStore","visible","setVisible","history","useHistory","placement","closable","onClose","width","getContainer","afterVisibleChange","goBack","loggedinUser"],"mappings":"gJAGMA,EAAYC,IAAOC,IAAV,wIAYAC,IAJF,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACd,OAAO,cAACJ,EAAD,UAAYI,M,qGCZN,UAA0B,mCCA1B,MAA0B,kCCA1B,MAA0B,kCCA1B,MAA0B,iC,SCM5BC,EAAkB,SAACC,GAC9B,IAKMC,EAAUC,EAAcF,EAAOG,WAAWC,MAChD,QAAQ,GACN,IAPa,CAAC,MAAO,MAAO,OAOhBC,SAASJ,GACnB,OAAOD,EAAOG,WAAWG,IAC3B,IARc,CAAC,OAAQ,MAAO,MAAO,MAAO,MAAO,QAQtCD,SAASJ,GACpB,OAAOM,EACT,IATe,CAAC,MAAO,MAAO,OAShBF,SAASJ,GACrB,OAAOO,EACT,IAVe,CAAC,MAAO,OAAQ,OAUjBH,SAASJ,GACrB,OAAOQ,EACT,QACE,OAAOC,IAIAC,EAAa,SAACC,GACzBC,UAAUC,UAAUC,UAAUH,GAAKI,MACjC,WACEC,IAAQC,QAAQ,sCAElB,SAAUC,GACRF,IAAQG,MAAM,mBAKdlB,EAAgB,SAACU,GAAD,OAASA,EAAIS,MAAM,KAAKC,MAAMC,gB,gICuCrCC,EAvEIC,aAAS,WAAO,IACzBC,EAAiBC,cAAjBD,aADwB,EAEME,oBAAS,GAFf,mBAEzBC,EAFyB,KAEZC,EAFY,KAQhCC,qBAAU,WAGR,OAFAD,GAAe,GACfJ,EAAaM,WACN,WACLN,EAAaO,WAEd,CAACP,IAEJ,IAAMQ,EACHL,GAAgBH,EAAaS,YAAaT,EAAaU,QAWpD,KAVF,qBACEC,MAAO,CACLC,UAAW,SACXC,UAAW,GACXC,OAAQ,GACRC,WAAY,QALhB,SAQE,cAAC,IAAD,CAAQC,QAtBe,WAC3BhB,EAAaM,YAqBT,4BAIN,OACE,8BAEE,cAAC,IAAD,CACEW,WAAW,aACXC,WAAYlB,EAAamB,SACzBX,SAAUA,EACVY,WAAY,SAACC,GACX,OACE,cAAC,IAAD,CAAUC,QAAM,EAACC,OAAO,EAAOC,QAASrB,EAAasB,QAAM,EAA3D,SACE,eAAC,IAAKC,KAAN,CAEEC,QAAS,CACP,cAAC,IAAD,CAAQC,KAAK,OAAOC,KAAMR,EAAK5C,WAAWG,IAAIH,WAAWG,IAAzD,kBAGA,cAAC,IAAD,CACEgD,KAAK,OACLZ,QAAS,kBACP/B,YAAWoC,EAAK5C,WAAWG,IAAIH,WAAWG,MAH9C,gCANJ,UAgBE,cAAC,IAAK8C,KAAKI,KAAX,CACER,OAAQ,cAAC,IAAD,CAAQS,IAAK1D,YAAgBgD,EAAK5C,WAAWG,SAEvD,8BACE,6BAAKyC,EAAK5C,WAAWuD,eAnBlBX,EAAKY,c,yBCvCpBC,EAAUnC,aAAS,WAAO,IACtBoC,EAAclC,cAAdkC,UADqB,EAECjC,oBAAS,GAFV,mBAEtBkC,EAFsB,KAEbC,EAFa,KAGvBC,EAAUC,cAgBhB,OACE,eAAC,IAAD,CACEhB,MAAM,iBACNiB,UAAU,QACVC,UAAU,EACVC,QAfY,WACdL,GAAW,IAeTD,QAASA,EACTO,MAAM,qBACNC,cAAc,EACdC,mBAfkB,WACfT,GACHE,EAAQQ,UAKV,UAUE,8CACCX,EAAUY,aACT,cAAC,EAAD,IAEA,cAAC5E,EAAA,EAAD,uDAMO+D","file":"static/js/8.3cadc60a.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledDiv = styled.div`\n  background: orange;\n  padding: 10px;\n  margin: 100px 30px 20px;\n  color: #fff;\n  border-radius: 4px;\n`;\n\nconst Tips = ({ children }) => {\n  return <StyledDiv>{children}</StyledDiv>;\n};\n\nexport default Tips;\n","export default __webpack_public_path__ + \"static/media/common.c5ef5ebd.svg\";","export default __webpack_public_path__ + \"static/media/music.dee5299f.svg\";","export default __webpack_public_path__ + \"static/media/video.2d61b46f.svg\";","export default __webpack_public_path__ + \"static/media/file.0309cae4.svg\";","import common from \"../res/common.svg\";\nimport music from \"../res/music.svg\";\nimport video from \"../res/video.svg\";\nimport file from \"../res/file.svg\";\nimport { message } from \"antd\";\n\nexport const getPreviewImage = (urlObj) => {\n  const picArr = [\"jpg\", \"png\", \"svg\"];\n  const fileArr = [\"docx\", \"doc\", \"ppt\", \"wps\", \"pdf\", \"xlsx\"];\n  const musicArr = [\"mp3\", \"wma\", \"aac\"];\n  const videoArr = [\"mp4\", \"mpeg\", \"avi\"];\n\n  const fileExt = getFileExtend(urlObj.attributes.name);\n  switch (true) {\n    case picArr.includes(fileExt):\n      return urlObj.attributes.url;\n    case fileArr.includes(fileExt):\n      return file;\n    case musicArr.includes(fileExt):\n      return music;\n    case videoArr.includes(fileExt):\n      return video;\n    default:\n      return common;\n  }\n};\n\nexport const copyToClip = (str) => {\n  navigator.clipboard.writeText(str).then(\n    function () {\n      message.success(\"copy to your clipboard success!\");\n    },\n    function (err) {\n      message.error(\"copy error!\");\n    }\n  );\n};\n\nconst getFileExtend = (str) => str.split(\".\").pop().toLowerCase();\n","import { observer } from \"mobx-react\";\nimport React, { useEffect, useState } from \"react\";\nimport useStore from \"../stores\";\nimport { Button, List, Avatar, Skeleton } from \"antd\";\nimport { getPreviewImage, copyToClip } from \"../util/common-utils\";\n\nconst UploadList = observer(() => {\n  const { HistoryStore } = useStore();\n  const [initloading, setInitLoading] = useState(true);\n\n  const handleInfiniteOnLoad = () => {\n    HistoryStore.findList();\n  };\n\n  useEffect(() => {\n    setInitLoading(false);\n    HistoryStore.findList();\n    return () => {\n      HistoryStore.reset();\n    };\n  }, [HistoryStore]);\n\n  const loadMore =\n    !initloading && !HistoryStore.isLoading && HistoryStore.hasMore ? (\n      <div\n        style={{\n          textAlign: \"center\",\n          marginTop: 12,\n          height: 32,\n          lineHeight: \"32px\",\n        }}\n      >\n        <Button onClick={handleInfiniteOnLoad}>loading more</Button>\n      </div>\n    ) : null;\n\n  return (\n    <div>\n      {/* {console.log(HistoryStore.isLoading)} */}\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={HistoryStore.fileList}\n        loadMore={loadMore}\n        renderItem={(item) => {\n          return (\n            <Skeleton avatar title={false} loading={initloading} active>\n              <List.Item\n                key={item.id}\n                actions={[\n                  <Button type=\"link\" href={item.attributes.url.attributes.url}>\n                    open\n                  </Button>,\n                  <Button\n                    type=\"link\"\n                    onClick={() =>\n                      copyToClip(item.attributes.url.attributes.url)\n                    }\n                  >\n                    copy to clipboard\n                  </Button>,\n                ]}\n              >\n                <List.Item.Meta\n                  avatar={<Avatar src={getPreviewImage(item.attributes.url)} />}\n                />\n                <div>\n                  <h5>{item.attributes.filename}</h5>\n                </div>\n              </List.Item>\n            </Skeleton>\n          );\n        }}\n      ></List>\n    </div>\n  );\n});\n\nexport default UploadList;\n","import { observer } from \"mobx-react\";\nimport React, { useState } from \"react\";\nimport UploadList from \"../components/List\";\nimport useStore from \"../stores\";\nimport Tips from \"../components/Tips\";\nimport { Drawer } from \"antd\";\nimport { useHistory } from \"react-router\";\n\nconst History = observer(() => {\n  const { UserStore } = useStore();\n  const [visible, setVisible] = useState(true);\n  const history = useHistory();\n\n  // const showDrawer = () => {\n  //   setVisible(true);\n  // };\n\n  const onClose = () => {\n    setVisible(false);\n  };\n\n  const onCloseGoBack = () => {\n    if (!visible) {\n      history.goBack();\n    }\n  };\n\n  return (\n    <Drawer\n      title=\"Upload History\"\n      placement=\"right\"\n      closable={false}\n      onClose={onClose}\n      visible={visible}\n      width=\"calc(100% - 250px)\"\n      getContainer={false}\n      afterVisibleChange={onCloseGoBack}\n    >\n      <h1>History Page</h1>\n      {UserStore.loggedinUser ? (\n        <UploadList />\n      ) : (\n        <Tips>Please Login to see upload history</Tips>\n      )}\n    </Drawer>\n  );\n});\n\nexport default History;\n"],"sourceRoot":""}