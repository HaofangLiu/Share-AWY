{"version":3,"sources":["loading.js","res/share.svg","components/LogoComp.js","components/LoginComp.js","App.js","reportWebVitals.js","index.js","models/index.js","stores/auth.js","stores/user.js","stores/image.js","stores/history.js","stores/index.js"],"names":["Loading","StyledLogoArea","styled","div","LogoUrl","img","LinkStyled","NavLink","StyledDropDownContent","StyledDropItem","StyledFamily","span","LogoComponent","observer","to","exact","src","share","alt","className","activeClassName","StyledLoginSection","StyledButton","button","StyledButtonUi","Button","LoginComp","useStore","UserStore","AuthStore","HistoryStore","ImageStore","loggedinUser","onClick","logout","resetUser","reset","clearServerFile","block","type","icon","UserOutlined","attributes","username","Home","lazy","About","History","Login","Register","App","LogoComp","fallback","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","process","document","getElementById","AV","init","appId","appKey","Auth","password","email","user","User","setUsername","setPassword","setEmail","Promise","resolve","reject","signUp","newUser","err","logIn","logOut","current","Upload","uploadFile","file","fileName","item","Object","fileAv","File","set","save","serverFile","e","find","page","limit","query","Query","include","skip","equalTo","descending","res","catch","window","values","makeObservable","this","observable","setUserName","action","login","register","name","psd","eml","setUser","isUploading","setFileName","setFile","uploadedFile","runInAction","finally","isLoading","fileList","currentPage","hasMore","appenToCurrenList","findList","newList","concat","length","message","error","context","createContext","useContext"],"mappings":"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","file":"static/js/main.e2a06675.chunk.js","sourcesContent":["import React from \"react\";\nimport { Spin } from \"antd\";\n\nconst Loading = () => {\n  return <Spin />;\n};\n\nexport default Loading;\n","export default __webpack_public_path__ + \"static/media/share.b2c80d85.svg\";","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport share from \"../res/share.svg\";\nimport styled from \"styled-components\";\nimport { observer } from \"mobx-react\";\n\nconst StyledLogoArea = styled.div`\n  position: absolute;\n  top: 24px;\n  z-index: 100;\n`;\n\nconst LogoUrl = styled.img`\n  height: 50px;\n`;\n\nconst LinkStyled = styled(NavLink)`\n  padding: 10px 15px;\n  position: relative;\n  &::after {\n    content: \"\";\n    width: 10px;\n    height: 10px;\n    border: 1px solid #121212;\n    border-width: 0 0 2px 2px;\n    position: absolute;\n    right: 0;\n    top 50%;\n    transform: translate(0, -100%) rotate(-45deg);\n    transition: all 0.3s;\n  }\n  ${StyledLogoArea}:hover &::after  {\n    transform: translate(0, -50%) rotate(135deg);\n  } \n`;\n\nconst StyledDropDownContent = styled.div`\n  visibility: hidden;\n  opacity: 0;\n  background: #fff;\n  border: 1px solid #121212;\n  border-radius: 4px;\n  position: absolute;\n  top: calc(100% + 5px);\n  padding: 8px 0;\n  left: 50%;\n  transform: translate(-50%);\n  transition: all 0.3s;\n  ${StyledLogoArea}:hover & {\n    visibility: visible;\n    opacity: 1;\n  }\n`;\n\nconst StyledDropItem = styled(NavLink)`\n  padding: 8px 20px;\n  font-size: 15px;\n  display: block;\n  cursor: pointer;\n  &:hover {\n    color: black;\n    background-color: #e8e8e8;\n  }\n  &.active {\n    color: grey;\n  }\n`;\n\nconst StyledFamily = styled.span`\n  font-size: 22px;\n  color: #fff;\n  padding: 0 5px;\n  vertical-align: middle;\n`;\n\nconst LogoComponent = observer(() => {\n  return (\n    <StyledLogoArea>\n      <LinkStyled to=\"/\" exact>\n        <LogoUrl src={share} alt=\"logo\"></LogoUrl>\n        <StyledFamily>share AWY</StyledFamily>\n      </LinkStyled>\n      <StyledDropDownContent className=\"dropdown-content\">\n        <StyledDropItem to=\"/history\" activeClassName=\"active\">\n          History\n        </StyledDropItem>\n        <StyledDropItem to=\"/about\" activeClassName=\"active\">\n          About\n        </StyledDropItem>\n      </StyledDropDownContent>\n    </StyledLogoArea>\n  );\n});\n\nexport default LogoComponent;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport useStore from \"../stores\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { observer } from \"mobx-react-lite\";\n\nconst StyledLoginSection = styled.div`\n  position: absolute;\n  right: 30px;\n  top: 24px;\n  z-index: 100;\n  box-shadow: 0 0 8px 0 rgb(0 0 0 / 13%);\n  background: #fff;\n  border-radius: 0.3125rem;\n  height: 40px;\n  display: flex;\n`;\nconst StyledButton = styled.button`\n  padding: 10px 15px;\n  border: none;\n  color: #333;\n  outline: none;\n  background-color: transparent;\n  cursor: pointer;\n`;\n\nconst LinkStyled = styled(NavLink)`\n  color: #333;\n  padding: 10px 15px;\n  &.active {\n    color: red;\n  }\n`;\n\nconst StyledButtonUi = styled(Button)`\n  height: 100%;\n`;\n\nconst LoginComp = observer(() => {\n  const { UserStore, AuthStore, HistoryStore, ImageStore } = useStore();\n\n  const handleLogout = () => {\n    AuthStore.logout();\n    UserStore.resetUser();\n    HistoryStore.reset();\n    ImageStore.clearServerFile();\n  };\n  return (\n    <>\n      {UserStore.loggedinUser ? (\n        <StyledLoginSection>\n          <StyledButton onClick={handleLogout}>Logout</StyledButton>\n          <StyledButtonUi block={true} type=\"primary\" icon={<UserOutlined />}>\n            {UserStore.loggedinUser.attributes.username}\n          </StyledButtonUi>\n        </StyledLoginSection>\n      ) : (\n        <StyledLoginSection>\n          <LinkStyled to=\"/login\" activeClassName=\"active\">\n            Login\n          </LinkStyled>\n          <LinkStyled to=\"/register\">Create Account</LinkStyled>\n        </StyledLoginSection>\n      )}\n    </>\n  );\n});\n\nexport default LoginComp;\n","import React, { Suspense, lazy } from \"react\";\nimport \"./App.css\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Loading from \"./loading\";\nimport LogoComponent from \"./components/LogoComp\";\nimport LoginComp from \"./components/LoginComp\";\nconst Home = lazy(() => import(\"./pages/Home\"));\nconst About = lazy(() => import(\"./pages/About\"));\nconst History = lazy(() => import(\"./pages/History\"));\nconst Login = lazy(() => import(\"./pages/Login\"));\nconst Register = lazy(() => import(\"./pages/Register\"));\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <main>\n        <LogoComponent />\n        <LoginComp />\n        <Suspense fallback={<Loading />}>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/history\" exact component={History} />\n            <Route path=\"/about\" exact component={About} />\n            <Route path=\"/login\" exact component={Login} />\n            <Route path=\"/register\" exact component={Register} />\n          </Switch>\n        </Suspense>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <Router basename={process.env.PUBLIC_URL}>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import AV, { User } from \"leancloud-storage\";\n\nAV.init({\n  appId: \"hcF8bWQ68nG85EYEXBV5zKnD-MdYXbMMI\",\n  appKey: \"zRzygxnrKphnXSIM4Tweq0AN\",\n});\n\nexport const Auth = {\n  register(username, password, email) {\n    let user = new User();\n    user.setUsername(username);\n    user.setPassword(password);\n    user.setEmail(email);\n    return new Promise((resolve, reject) => {\n      user.signUp().then(\n        (newUser) => resolve(newUser),\n        (err) => reject(err)\n      );\n    });\n  },\n\n  login(username, password) {\n    return new Promise((resolve, reject) => {\n      User.logIn(username, password).then(\n        (user) => resolve(user),\n        (err) => reject(err)\n      );\n    });\n  },\n\n  logout() {\n    User.logOut();\n  },\n\n  getCurrentUser() {\n    return User.current();\n  },\n};\n\nexport const Upload = {\n  uploadFile(file, fileName) {\n    const item = new AV.Object(\"Image\");\n    const fileAv = new AV.File(fileName, file);\n    item.set(\"filename\", fileName);\n    item.set(\"owner\", AV.User.current());\n    item.set(\"url\", fileAv);\n    return new Promise((resolve, reject) => {\n      item.save().then(\n        (serverFile) => {\n          resolve(serverFile);\n        },\n        (e) => {\n          reject(e);\n        }\n      );\n    });\n  },\n\n  find({ page = 0, limit = 10 }) {\n    // show all user upload files\n    const query = new AV.Query(\"Image\");\n    query.include(\"owner\");\n    query.limit(limit);\n    query.skip(page * limit);\n    query.equalTo(\"owner\", AV.User.current());\n    query.descending(\"createdAt\");\n    return new Promise((resolve, reject) => {\n      query\n        .find()\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  },\n};\n\nwindow.Upload = Upload;\n","import { makeObservable, observable, action } from \"mobx\";\nimport { Auth } from \"../models\";\n\nclass AuthStore {\n  values = {\n    username: \"asdf\",\n    password: \"\",\n    email: \"\",\n  };\n\n  constructor() {\n    makeObservable(this, {\n      values: observable,\n      setUserName: action,\n      setPassword: action,\n      login: action,\n      register: action,\n      logout: action,\n    });\n  }\n\n  setUserName(name) {\n    this.values.username = name;\n  }\n\n  setPassword(psd) {\n    this.values.password = psd;\n  }\n\n  setEmail(eml) {\n    this.values.email = eml;\n  }\n\n  login() {\n    return new Promise((resolve, reject) => {\n      Auth.login(this.values.username, this.values.password)\n        .then((user) => {\n          // console.log(\"login success\");\n          resolve(user);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n\n  register() {\n    return new Promise((resolve, reject) => {\n      Auth.register(\n        this.values.username,\n        this.values.password,\n        this.values.email\n      )\n        .then((user) => {\n          // console.log(\"register success\");\n          resolve(user);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n\n  logout() {\n    Auth.logout();\n  }\n}\n\nexport default AuthStore;\n","import { makeObservable, observable, action } from \"mobx\";\nimport {Auth} from \"../models\";\n\nclass UserStore {\n  loggedinUser = null;\n\n  constructor() {\n    makeObservable(this, {\n      loggedinUser: observable,\n      setUser: action,\n      resetUser: action,\n    });\n  }\n\n  setUser() {\n    this.loggedinUser = Auth.getCurrentUser();\n  }\n\n  resetUser() {\n    this.loggedinUser = null;\n  }\n}\n\nexport default UserStore;\n","import { makeObservable, observable, action, runInAction } from \"mobx\";\nimport { Upload } from \"../models\";\n\nclass ImageStore {\n  fileName = \"\";\n  file = null;\n  isUploading = false;\n  serverFile = null;\n\n  constructor() {\n    makeObservable(this, {\n      fileName: observable,\n      file: observable,\n      isUploading: observable,\n      serverFile: observable,\n      setFileName: action,\n      setFile: action,\n      uploadFile: action,\n      clearServerFile: action,\n    });\n  }\n\n  setFileName(name) {\n    this.fileName = name;\n  }\n\n  setFile(file) {\n    this.file = file;\n  }\n\n  uploadFile() {\n    this.isUploading = true;\n    this.serverFile = null;\n    return new Promise((resolve, reject) => {\n      Upload.uploadFile(this.file, this.fileName)\n        .then((uploadedFile) => {\n          runInAction(() => {\n            this.serverFile = uploadedFile;\n          });\n          resolve(uploadedFile);\n        })\n        .catch((e) => {\n          reject(e);\n        })\n        .finally(() => {\n          runInAction(() => {\n            this.isUploading = false;\n          });\n        });\n    });\n  }\n\n  clearServerFile() {\n    this.serverFile = null;\n  }\n}\n\nexport default ImageStore;\n","import { makeObservable, observable, action, runInAction } from \"mobx\";\nimport { Upload } from \"../models\";\nimport { message } from \"antd\";\n\nclass HistoryStore {\n  isLoading = false;\n  fileList = [];\n  currentPage = 0;\n  hasMore = true;\n  limit = 10;\n\n  constructor() {\n    makeObservable(this, {\n      isLoading: observable,\n      fileList: observable,\n      currentPage: observable,\n      hasMore: observable,\n      appenToCurrenList: action,\n      findList: action,\n      reset: action,\n    });\n  }\n\n  reset() {\n    this.isLoading = false;\n    this.fileList = [];\n    this.currentPage = 0;\n    this.hasMore = true;\n  }\n\n  appenToCurrenList(newList) {\n    this.fileList = this.fileList.concat(newList);\n  }\n\n  findList() {\n    this.isLoading = true;\n    Upload.find({ page: this.currentPage, limit: this.limit })\n      .then((res) => {\n        runInAction(() => {\n          this.appenToCurrenList(res);\n          this.currentPage++;\n          if (res.length < this.limit) {\n            this.hasMore = false;\n          }\n        });\n      })\n      .catch((e) => {\n        message.error(\"loading failed\");\n      })\n      .finally(() => {\n        runInAction(() => {\n          this.isLoading = false;\n        });\n      });\n  }\n}\n\nexport default HistoryStore;\n","import { createContext, useContext } from \"react\";\nimport AuthStore from \"./auth\";\nimport UserStore from \"./user\";\nimport ImageStore from \"./image\";\nimport HistoryStore from \"./history\";\n\nconst context = createContext({\n  AuthStore: new AuthStore(),\n  UserStore: new UserStore(),\n  ImageStore: new ImageStore(),\n  HistoryStore: new HistoryStore(),\n});\n\nconst useStore = () => useContext(context);\nexport default useStore;\n"],"sourceRoot":""}